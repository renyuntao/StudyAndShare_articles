# !:Awk与Sed中的不同用法           
2016-04-02  <br /><br />           
                   
在 Awk 和 Sed 中，感叹号 `!` 都表示取非操作，但是这个取非符号在 Awk 和 Sed 中用法有一些不同，下面来举例说明.                
下面是一个文本文件 `example.txt` 中的内容:              
                
```
CH12
CH23au
RCH34
CH99de
ZE33a
CH88aude
CHa
```
现在想要对该文件中的内容做一些修改，修改规则如下:               
            
> 如果该文件中的某一行字符串是以 **CH** 打头，并且该行字符串中不包含子串 **au**, 则在该行字符串的末尾添加子串 **au**.              
            
之后输出文件中的内容，按照上面的规则，输出的内容应该如下所示:               
             
```
CH12au
CH23au
RCH34
CH99deau
ZE33a
CH88aude
CHaau
```

下面分别使用 Awk 和 Sed 来完成上述任务.                   
              
## Awk        
下面是 Awk 的做法:               
           
```bash
$ awk '/^CH/ && !/au/ {$0=$0"au"}1' example.txt
```
          
- `/^CH/` 表示匹配以 `CH` 打头的字符串 
- `!/au/` 表示字符串中不包含子串 `au`, 其中 `!` 为取非符号,**注意 `!` 符号在 `/au/` 的左侧**                   
               
## Sed               
下面是 Sed 的做法:                 
               
```bash
$ sed '/^CH/ {/au/! s/$/au/}' example.txt
```
         
- `/^CH/` 表示匹配以 `CH` 打头的字符串            
- `/au/!` 表示字符串中不包含子串 `au`,其中 `!` 为取非符号，**注意此时 `!` 在 `/au/` 的右侧**                     
                 
通过上面的例子可以看出，取非符号 `!` 在 Sed 和 Awk 中所用的位置不同，在 Awk 中，`!` 用在匹配模式的左侧，而在 Sed 中，`!` 用在匹配模式的右侧.    
